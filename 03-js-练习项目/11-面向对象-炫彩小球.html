<!DOCTYPE html>
<html lang="en">

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            background-color: black;
            overflow: hidden;
        }

        .ball {
            position: absolute;
            border-radius: 50%;
        }
    </style>
</head>

<body>

    <div id="box">

    </div>

    <script>
        // 所有Ball实例放入一个数组
        var ball_list = new Array();

        // 随机颜色数组
        var color_list = ["#66CCCC", "#CCFF66", "#FF99CC", "#FF6666", "#CC3399", "#FF6600"];

        function Ball(x, y) {
            // 圆心坐标X
            this.x = x;
            // 圆心坐标Y
            this.y = y;
            // 圆半径
            this.r = 10;
            // 增量x和增量y
            this.dx = parseInt(Math.random() * 21 + 1) - 10;
            this.dy = parseInt(Math.random() * 21 + 1) - 10;
            // 透明度
            this.opacity = 1;
            // 颜色
            this.color = color_list[parseInt(Math.random() * color_list.length)];
            // DOM元素
            this.dom = null;

            // 创建实例时初始化
            this.init();
        }

        // 初始化方法
        Ball.prototype.init = function () {
            this.dom = document.createElement("div");
            this.dom.className = "ball";
            this.update();

            document.body.appendChild(this.dom);

            ball_list.push(this);
        };

        // 运动方法
        Ball.prototype.move = function () {
            this.x += this.dx;
            this.y -= this.dy;
            this.r += 0.3;
            this.opacity -= 0.01;
            this.update();

            // 透明的小于零时删除自己
            if (this.opacity < 0) {
                for (var i in ball_list) {
                    if (this == ball_list[i]) {
                        ball_list.splice(i, 1);
                    }
                }
                document.body.removeChild(this.dom);
                delete this;
            }
        }

        // 更新方法
        Ball.prototype.update = function () {
            this.dom.style.opacity = this.opacity;
            this.dom.style.width = this.r * 2 + "px";
            this.dom.style.height = this.r * 2 + "px";
            // CSS中元素定位以左上角为基点
            this.dom.style.left = this.x - this.r + "px";
            this.dom.style.top = this.y - this.r + "px";
            this.dom.style.backgroundColor = this.color;
        };

        // 监听鼠标指针
        document.onmousemove = function (e) {
            var num = parseInt(Math.random() * 6);

            // 减少小球生成数量
            if (num == 0) {
                // 得到鼠标位置
                var x = e.clientX;
                var y = e.clientY;

                new Ball(x, y);
            }
        };

        // 定时器，负责更新所有的Ball对象
        setInterval(function () {
            for (var i in ball_list) {

                ball_list[i].move();
            }
        }, 20);
    </script>
</body>

</html>