<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<form
			id="login_form"
			action="https://www.imooc.com/api/http/search/suggest?word=js"
			method="POST"
			enctype="application/x-www-form-urlencoded">
			<input type="text" name="username" placeholder="用户名" />
			<input type="password" name="password" placeholder="密码" />
			<input id="submit" type="submit" value="登录" />
		</form>

		<script>
			const url = "https://www.imooc.com/api/http/search/suggest?word=js";

			const loginForm = document.getElementById("login_form");
			const { username, password } = loginForm;
			const btn = document.getElementById("submit");

			btn.addEventListener(
				"click",
				(e) => {
					// 阻止表单自动提交
					e.preventDefault();

					// 表单数据验证

					// 发送ajax请求
					const xhr = new XMLHttpRequest();

					xhr.addEventListener(
						"load",
						() => {
							console.log(xhr.response);
						},
						false
					);

					xhr.open("POST", url, true);

					// const data = `username = ${username.value} & password = ${password.value}`;
					const data = new FormData(loginForm);

					// xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

					xhr.send(data);
				},
				false
			);
		</script>
	</body>
</html>
